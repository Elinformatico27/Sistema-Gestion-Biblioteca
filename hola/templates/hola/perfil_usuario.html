{% block title %}
{% endblock %}

{% block content %}
<style>
    body {
        font-family:'Poppins', sans-serif;
        margin:0; padding:0;
        min-height:100vh;
        color:#fff;
        background: radial-gradient(circle at top left, #1a2a6c, #b21f1f, #fdbb2d);
        background-size:400% 400%;
        animation:fondoGradiente 12s ease infinite;
        display:flex;
        justify-content:center;
        align-items:flex-start;
        padding-top:50px;
    }

    @keyframes fondoGradiente {
        0% { background-position:0% 50%; }
        50% { background-position:100% 50%; }
        100% { background-position:0% 50%; }
    }

    .profile-card {
        max-width: 700px;
        width: 90%;
        background: rgba(255,255,255,0.12);
        backdrop-filter: blur(12px);
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        transition: transform 0.3s, box-shadow 0.3s;
    }

    .profile-card:hover {
        transform: translateY(-5px);
        box-shadow:0 15px 30px rgba(0,0,0,0.6);
    }

    .profile-icon {
        width:100px;
        height:100px;
        background:#3498db;
        border-radius:50%;
        display:flex;
        align-items:center;
        justify-content:center;
        margin:0 auto 20px auto;
        font-size:50px;
        color:white;
        box-shadow:0 4px 15px rgba(0,0,0,0.4);
    }

    .btn-custom, .btn-inventario {
        display:inline-block;
        margin:10px 5px;
        padding:12px 28px;
        border-radius:30px;
        font-weight:700;
        text-decoration:none;
        color:white;
        transition:0.3s;
        box-shadow:0 4px 15px rgba(0,0,0,0.4);
    }

    .btn-custom {
        background: linear-gradient(135deg,#ff416c,#ff4b2b);
    }

    .btn-custom:hover {
        transform:translateY(-4px);
        box-shadow:0 8px 25px rgba(0,0,0,0.5);
    }

    .btn-inventario {
        background: linear-gradient(135deg,#1abc9c,#16a085);
    }

    .btn-inventario:hover {
        transform:translateY(-4px);
        box-shadow:0 8px 25px rgba(0,0,0,0.5);
    }

    h2 {
        font-size:2rem;
        margin:15px 0 25px 0;
        text-shadow:0 0 12px #00d9ff;
    }

    .list-group {
        list-style:none;
        padding:0;
        margin-top:20px;
    }

    .list-group-item {
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(8px);
        margin-bottom:10px;
        padding:10px 15px;
        border-radius:15px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        box-shadow:0 4px 10px rgba(0,0,0,0.3);
    }

    .badge {
        padding:5px 12px;
        border-radius:20px;
        font-weight:bold;
        color:white;
    }

    .Pendiente { background:#f39c12; }
    .Confirmada { background:#27ae60; }
    .Cancelada { background:#e74c3c; }

    .text-muted {
        color:#dcdcdc;
        font-style:italic;
        margin-top:15px;
    }
</style>

<div class="profile-card">
    <div class="profile-icon">
        <i class="fas fa-user"></i>
    </div>

    <!-- BotÃ³n Inicio -->
    <a href="{% url 'principal' %}" class="btn-custom">
        <i class="fas fa-home"></i> Inicio
    </a>

    <h2>Bienvenido, {{ user.username }}</h2>

    {% if user.is_superuser %}
        <!-- Admin / Bibliotecario -->
        <a href="{% url 'inventario_sgb' %}" class="btn-inventario">
            <i class="fas fa-boxes"></i> Ver Inventario
        </a>
        <a href="{% url 'lista_reservas' %}" class="btn-custom">
            <i class="fas fa-calendar-check"></i> Todas las Reservas
        </a>

        {% if reservas %}
            <h5>Resumen de todas las reservas:</h5>
            <ul class="list-group">
                {% for reserva in reservas %}
                    <li class="list-group-item">
                        {{ reserva.libro.titulo }} - {{ reserva.usuario.username }}
                        <span class="badge {{ reserva.estado }}">{{ reserva.get_estado_display }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No hay reservas registradas.</p>
        {% endif %}

    {% else %}
        <!-- Usuario normal -->
        <a href="{% url 'mis_reservas' %}" class="btn-custom">
            <i class="fas fa-calendar-check"></i> Mis Reservas
            {% if reservas|length > 0 %}
                <span class="badge Confirmada">{{ reservas|length }}</span>
            {% endif %}
        </a>

        {% if reservas %}
            <h5>Resumen de tus reservas:</h5>
            <ul class="list-group">
                {% for reserva in reservas %}
                    <li class="list-group-item">
                        {{ reserva.libro.titulo }}
                        <span class="badge {{ reserva.estado }}">{{ reserva.get_estado_display }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">No tienes reservas activas.</p>
        {% endif %}
    {% endif %}
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}
