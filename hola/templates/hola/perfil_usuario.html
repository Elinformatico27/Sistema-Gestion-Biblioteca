{% block title %}Perfil{% endblock %}

{% block content %}
<style>
body {
    background: linear-gradient(to right, #f0f4f8, #d9e2ec);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.profile-card {
    max-width: 700px;
    margin: 50px auto;
    background: #ffffff;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    padding: 30px;
    text-align: center;
    transition: transform 0.3s;
}
.profile-card:hover { transform: translateY(-5px); }
.profile-icon {
    width: 100px;
    height: 100px;
    background: #3498db;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px auto;
    font-size: 50px;
    color: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
.btn-custom {
    display: inline-block;
    margin: 10px;
    padding: 12px 28px;
    background: #1abc9c;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: bold;
    transition: background 0.3s, transform 0.2s;
}
.btn-custom:hover { background: #16a085; transform: translateY(-2px); }
.btn-inventario {
    display: inline-block;
    margin: 10px;
    padding: 12px 28px;
    background: #f39c12;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: bold;
    transition: background 0.3s, transform 0.2s;
}
.btn-inventario:hover { background: #e67e22; transform: translateY(-2px); }
.list-group-item {
    border-radius: 8px;
    margin-bottom: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}
.badge-info { background-color: #3498db; color: white; font-weight: bold; }
.text-muted { color: #7f8c8d; font-style: italic; }
</style>

<div class="profile-card">
    <div class="profile-icon">
        <i class="fas fa-user"></i>
    </div>

    <!-- BotÃ³n Inicio -->
    <a href="{% url 'principal' %}" class="btn-custom">
        <i class="fas fa-home"></i> Inicio
    </a>

    <h2>Bienvenido, {{ user.username }}</h2>

    {% if user.is_superuser %}
        <!-- Admin / Bibliotecario -->
        <a href="{% url 'inventario_sgb' %}" class="btn-inventario">
            <i class="fas fa-boxes"></i> Ver Inventario
        </a>
        <a href="{% url 'lista_reservas' %}" class="btn-custom">
            <i class="fas fa-calendar-check"></i> Todas las Reservas
        </a>

        {% if reservas %}
            <h5 class="mt-4">Resumen de todas las reservas:</h5>
            <ul class="list-group text-start">
                {% for reserva in reservas %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ reserva.libro.titulo }} - {{ reserva.usuario.username }}
                        <span class="badge badge-info">{{ reserva.get_estado_display }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted mt-3">No hay reservas registradas.</p>
        {% endif %}

    {% else %}
        <!-- Usuario normal -->
        <a href="{% url 'mis_reservas' %}" class="btn-custom">
            <i class="fas fa-calendar-check"></i> Mis Reservas
            {% if reservas|length > 0 %}
                <span class="badge bg-danger">{{ reservas|length }}</span>
            {% endif %}
        </a>

        {% if reservas %}
            <h5 class="mt-4">Resumen de tus reservas:</h5>
            <ul class="list-group text-start">
                {% for reserva in reservas %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ reserva.libro.titulo }}
                        <span class="badge badge-info">{{ reserva.get_estado_display }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted mt-3">No tienes reservas activas.</p>
        {% endif %}
    {% endif %}
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}
